certificate:
  type: cert-manager
  spec:
    secretName: &secretName blocky-cert
    duration: 2160h # 90d
    renewBefore: 360h # 15d
    subject:
      organizations:
        - ByeonghoonYoo
    privateKey:
      algorithm: ECDSA
      size: 384
    dnsNames:
      - &host dnsb.bhyoo.com
    issuerRef:
      name: cert-manager-cluster-issuer
      kind: ClusterIssuer

dns:
  service:
    type: LoadBalancer
    annotations:
      static-lb.bhyoo.com/exclude-ingress-ip-nets: ""
      external-dns.alpha.kubernetes.io/cloudflare-proxied: "false"
    externalTrafficPolicy: Local

dot:
  enabled: true
  service:
    enabled: true
    type: LoadBalancer
    annotations:
      external-dns.alpha.kubernetes.io/cloudflare-proxied: "false"
      external-dns.alpha.kubernetes.io/hostname: *host
      static-lb.bhyoo.com/internal-ip-mappings: ingress
      static-lb.bhyoo.com/external-ip-mappings: external
      static-lb.bhyoo.com/exclude-external-ip-nets: 10.222.0.0/16
    externalTrafficPolicy: Local

doh:
  enabled: false
  tlsTerminationOn: app
  service:
    enabled: true
  ingress:
    enabled: true
    className: traefik
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
      external-dns.alpha.kubernetes.io/cloudflare-proxied: "false"
    hosts:
      - *host
    tlsSecretName: *secretName

upstream:
  # these external DNS resolvers will be used. Blocky picks 2 random resolvers from the list for each query
  # format for resolver: [net:]host:[port][/path]. net could be empty (default, shortcut for tcp+udp), tcp+udp, tcp, udp, tcp-tls or https (DoH). If port is empty, default port will be used (53 for udp and tcp, 853 for tcp-tls, 443 for https (Doh))
  # this configuration is mandatory, please define at least one external DNS resolver
  defaultUpstreams:
    - tcp-tls:1.1.1.1:853
    - tcp-tls:1.0.0.1:853
    - tcp-tls:dns-s.safedns.com:853

  startVerify: true

blocking:
  customize: true

  blackLists:
    ads:
      - https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt
      - https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
      - http://sysctl.org/cameleon/hosts
      - https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt
      - https://hosts.oisd.nl/
      - https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txt
      - https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Spam/hosts
      - https://v.firebog.net/hosts/static/w3kbl.txt
      - https://adaway.org/hosts.txt
      - https://v.firebog.net/hosts/AdguardDNS.txt
      - https://v.firebog.net/hosts/Admiral.txt
      - https://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txt
      - https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt
      - https://v.firebog.net/hosts/Easylist.txt
      - https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&showintro=0&mimetype=plaintext
      - https://raw.githubusercontent.com/FadeMind/hosts.extras/master/UncheckyAds/hosts
      - https://raw.githubusercontent.com/bigdargon/hostsVN/master/hosts
      - https://v.firebog.net/hosts/Easyprivacy.txt
      - https://v.firebog.net/hosts/Prigent-Ads.txt
      - https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.2o7Net/hosts
      - https://raw.githubusercontent.com/crazy-max/WindowsSpyBlocker/master/data/hosts/spy.txt
      - https://hostfiles.frogeye.fr/firstparty-trackers-hosts.txt
      - https://raw.githubusercontent.com/DandelionSprout/adfilt/master/Alternate%20versions%20Anti-Malware%20List/AntiMalwareHosts.txt
      - https://osint.digitalside.it/Threat-Intel/lists/latestdomains.txt
      - https://s3.amazonaws.com/lists.disconnect.me/simple_malvertising.txt
      - https://v.firebog.net/hosts/Prigent-Crypto.txt
      - https://bitbucket.org/ethanr/dns-blacklists/raw/8575c9f96e5b4a1308f2f12394abd86d0927a4a0/bad_lists/Mandiant_APT1_Report_Appendix_D.txt
      - https://phishing.army/download/phishing_army_blocklist_extended.txt
      - https://gitlab.com/quidsup/notrack-blocklists/raw/master/notrack-malware.txt
      - https://raw.githubusercontent.com/Spam404/lists/master/main-blacklist.txt
      - https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Risk/hosts
      - https://urlhaus.abuse.ch/downloads/hostfile/
      - https://zerodot1.gitlab.io/CoinBlockerLists/hosts_browser
      - https://raw.githubusercontent.com/yous/YousList/master/hosts.txt
      - https://adguardteam.github.io/AdGuardSDNSFilter/Filters/filter.txt
      - https://gist.githubusercontent.com/opus-x/3e673a9d5db2a214df05929a4eee6a57/raw/Spotify_Eliminate_Advertisements
    special:
      - https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/fakenews/hosts
    all:
      - |
        /.*/
  whiteLists:
    ads:
      - https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/whitelist.txt
      - https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/referral-sites.txt
      - |
        codecov.io
  clientGroupsBlock:
    default:
      - ads
      - special
    hackers:
      - all

  downloadTimeout: 4m

filtering:
  customize: true
  queryTypes:
    - AAAA

caching:
  customize: true
  prefetching: true

redis:
  enabled: true
  blocky:
    required: false
  auth:
    password: some-password
  master:
    persistence:
      size: 512Mi
      storageClass: ceph-block

prometheus:
  serviceMonitor:
    enabled: true

clientLookup:
  customize: true
  clients:
    hackers:
      - 95.216.117.41
      - 95.216.226.168
